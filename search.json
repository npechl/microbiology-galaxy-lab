[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "The Microbiology Galaxy Lab",
    "section": "",
    "text": "Preface\nTOADD",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Home</span>"
    ]
  },
  {
    "objectID": "index.html#running-the-code-yourself",
    "href": "index.html#running-the-code-yourself",
    "title": "The Microbiology Galaxy Lab",
    "section": "Running the code yourself",
    "text": "Running the code yourself\n\nInstallation\nTOADD\n\n\nData\nTOADD",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Home</span>"
    ]
  },
  {
    "objectID": "index.html#contributing",
    "href": "index.html#contributing",
    "title": "The Microbiology Galaxy Lab",
    "section": "Contributing",
    "text": "Contributing\nTOADD",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Home</span>"
    ]
  },
  {
    "objectID": "index.html#credit",
    "href": "index.html#credit",
    "title": "The Microbiology Galaxy Lab",
    "section": "Credit",
    "text": "Credit\nTOADD",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Home</span>"
    ]
  },
  {
    "objectID": "qmd/survey.html",
    "href": "qmd/survey.html",
    "title": "2  Survey",
    "section": "",
    "text": "2.1 Load data analytics libraries\nCode\nlibrary(data.table)\nlibrary(stringr)",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Survey</span>"
    ]
  },
  {
    "objectID": "qmd/survey.html#input-data",
    "href": "qmd/survey.html#input-data",
    "title": "2  Survey",
    "section": "2.2 Input data",
    "text": "2.2 Input data\n\n\nCode\ndf &lt;- fread(\"https://raw.githubusercontent.com/paulzierep/microgalaxy-survey/refs/heads/main/data/modified_answers.csv\")\n\n\n\n2.2.1 Correct column names\n\n\nCode\ndf$V1 &lt;- NULL\n\ndf$Timestamp &lt;- df$Timestamp |&gt; \n    str_split_i(\"\\\\ \", 1) |&gt; \n    lubridate::as_date(format = \"%d/%m/%Y\")\n\ndf$`Which country are you based in?` &lt;- df$`Which country are you based in?` |&gt;\n    str_to_title() |&gt;\n    str_split_i(\"\\\\,\", 1) |&gt;\n    str_squish() |&gt;\n    str_replace(\"Bazil\", \"Brazil\") |&gt;\n    str_replace(\"Hunagry\", \"Hungary\") |&gt;\n    str_replace(\"England\", \"United Kingdom\")\n\n\n\n\n2.2.2 Add continent\n\n\nCode\ndf$Continent &lt;- df$`Which country are you based in?` |&gt; \n    countrycode::countrycode(origin = \"country.name\", destination = \"continent\")\n\n\n\n\n2.2.3 Columns of interest\n\n\nCode\ncoi &lt;- c(\n    \"Timestamp\", \n    \"What is your main target?\",\n    \"Which techniques do you use?\",\n    \"Which analysis do you use or would like to do?\",\n    \"Galaxy Obstacles\",\n    \"Which country are you based in?\",\n    \"Continent\",\n    \"If the tools, platforms or databases from the previous question could be deployed in Galaxy would use prefer to use in there?\"\n)\n\ndf_1 &lt;- df[, coi, with = FALSE]\n\ncolnames(df_1) = c(\n    \"Timestamp\", \n    \"MainTarget\",\n    \"Techniques\",\n    \"Analysis\",\n    \"ReasonNotUse\",\n    \"Country\",\n    \"Continent\",\n    \"PreferenceToUse\"\n)",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Survey</span>"
    ]
  },
  {
    "objectID": "qmd/survey.html#what-is-your-main-target",
    "href": "qmd/survey.html#what-is-your-main-target",
    "title": "2  Survey",
    "section": "2.3 What is your main target?",
    "text": "2.3 What is your main target?\n\n\nCode\np1 &lt;- df_1$MainTarget |&gt; \n    str_remove_all(\"\\\\(|Protozoa, Helminths|Plasmodium falciparum|\\\\)\") |&gt;  \n    str_to_title() |&gt;\n    str_replace(\"Viruses\", \"Virus\") |&gt;\n    str_replace(\"And Fungal Pathogens\", \"Fungal Pathogens\") |&gt;\n    str_split(\"\\\\,\") |&gt; \n    lapply(str_squish) |&gt; \n    lapply(function(x) data.table(\"target\" = x)) |&gt; \n    rbindlist(idcol = \"id\")\n\np1 &lt;- p1[which(target != \"\"), by = target, .(N = id |&gt; unique() |&gt; length())]\n\np1$group &lt;- ifelse(p1$N &gt; 1, p1$target, \"Other\")\n\np1 &lt;- p1[, by = group, .( N = N |&gt; sum())]\n\np1$Prop &lt;- p1$N / sum(p1$N)",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Survey</span>"
    ]
  },
  {
    "objectID": "qmd/survey.html#which-techniques-do-you-use",
    "href": "qmd/survey.html#which-techniques-do-you-use",
    "title": "2  Survey",
    "section": "2.4 Which techniques do you use?",
    "text": "2.4 Which techniques do you use?\n\n\nCode\np2 &lt;- df_1$Techniques |&gt;\n    str_to_title() |&gt;\n    str_remove(\"I Am Trying To Learn! Mostly Outsourced To Service Providers But Need To Learn As I Have Observed Inconsistent Results\") |&gt;\n    str_remove_all(\"Amplicon|\\\\/\") |&gt;\n    str_replace(\"Chip-Seq\", \"ChIP-seq\") |&gt;\n    str_replace(\"Proteomics Or Metaproteomics\", \"(Meta)Proteomics\") |&gt;\n    str_replace(\"Transcriptomics Or Metatranscriptomics\", \"(Meta)Transcriptomics\") |&gt;\n    str_replace(\"Metatranscriptomics\", \"(Meta)Transcriptomics\") |&gt;\n    str_replace(\"Single Organism Transcriptomics\", \"(Meta)Transcriptomics\") |&gt;\n    str_replace(\"Md Simulations\", \"MD simulations\") |&gt;\n    str_split(\"\\\\,\") |&gt;\n    lapply(str_squish) |&gt;\n    lapply(function(x) data.table(\"technique\" = x)) |&gt;\n    rbindlist(idcol = \"id\")\n\n\np2 &lt;- p2[which(technique != \"\"), by = technique, .(N = id |&gt; unique() |&gt; length())]\n\np2$group &lt;- ifelse(p2$N &gt; 1, p2$technique, \"Other\")\n\np2 &lt;- p2[, by = group, .( N = N |&gt; sum())]\n\np2$Prop &lt;- p2$N / sum(p2$N)",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Survey</span>"
    ]
  },
  {
    "objectID": "qmd/survey.html#which-analysis-do-you-use-or-would-like-to-do",
    "href": "qmd/survey.html#which-analysis-do-you-use-or-would-like-to-do",
    "title": "2  Survey",
    "section": "2.5 Which analysis do you use or would like to do?",
    "text": "2.5 Which analysis do you use or would like to do?\n\n\nCode\np3 &lt;- df_1$Analysis |&gt;\n    str_to_title() |&gt;\n    str_replace(\"Gwas\", \"GWAS\") |&gt;\n    str_replace(\"Mag\", \"MAG\") |&gt;\n    str_replace(\"Snp\", \"SNP\") |&gt;\n    str_replace(\"Mlst\", \"MLST\") |&gt;\n    \n    str_replace(\"MAGs Building\", \"Metagenome Assembled Genome (MAG) Building\") |&gt;\n    str_replace(\"SNP Identification\", \"Single Nucleotide Polymorphism (SNP) Identification\") |&gt;\n    str_replace(\"Transcriptome Assembler\", \"Transcriptome Assembly\") |&gt;\n    \n    str_split(\"\\\\,\") |&gt;\n    lapply(str_squish) |&gt;\n    lapply(function(x) data.table(\"analysis\" = x)) |&gt;\n    rbindlist(idcol = \"id\")\n\n\np3 &lt;- p3[which(analysis != \"\"), by = analysis, .(N = id |&gt; unique() |&gt; length())]\n\np3$group &lt;- ifelse(p3$N &gt; 1, p3$analysis, \"Other\")\n\np3 &lt;- p3[, by = group, .( N = N |&gt; sum())]\n\np3$Prop &lt;- p3$N / sum(p3$N)",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Survey</span>"
    ]
  },
  {
    "objectID": "qmd/survey.html#galaxy-obstacles",
    "href": "qmd/survey.html#galaxy-obstacles",
    "title": "2  Survey",
    "section": "2.6 Galaxy Obstacles",
    "text": "2.6 Galaxy Obstacles\n\n\nCode\np4 &lt;- df_1$ReasonNotUse |&gt; \n    str_split(\"\\\\,\") |&gt;\n    lapply(str_squish) |&gt;\n    lapply(function(x) data.table(\"reason\" = x)) |&gt;\n    rbindlist(idcol = \"id\")\n\np4 &lt;- p4[which(reason != \"\"), by = reason, .(N = id |&gt; unique() |&gt; length())]\n\np4$Prop &lt;- p4$N / sum(p4$N)",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Survey</span>"
    ]
  },
  {
    "objectID": "qmd/survey.html#which-continent-are-you-based-in",
    "href": "qmd/survey.html#which-continent-are-you-based-in",
    "title": "2  Survey",
    "section": "2.7 Which continent are you based in?",
    "text": "2.7 Which continent are you based in?\n\n\nCode\np5 &lt;- df_1[, by = Continent, .N]\n\n\np5$Continent &lt;- p5$Continent |&gt; str_replace_na(\"Unknown\")\n\n\np5$Prop &lt;- p5$N / sum(p5$N)",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Survey</span>"
    ]
  },
  {
    "objectID": "qmd/survey.html#if-the-tools-platforms-or-databases-from-the-previous-question-could-be-deployed-in-galaxy-would-use-prefer-to-use-in-there",
    "href": "qmd/survey.html#if-the-tools-platforms-or-databases-from-the-previous-question-could-be-deployed-in-galaxy-would-use-prefer-to-use-in-there",
    "title": "2  Survey",
    "section": "2.8 If the tools, platforms or databases from the previous question could be deployed in Galaxy would use prefer to use in there?",
    "text": "2.8 If the tools, platforms or databases from the previous question could be deployed in Galaxy would use prefer to use in there?\n\n\nCode\np6 &lt;- df_1[, by = PreferenceToUse, .N]\n\np6[which(PreferenceToUse == \"\")]$PreferenceToUse = \"Unknown\"\n\np6$Prop &lt;- p6$N / sum(p6$N)",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Survey</span>"
    ]
  },
  {
    "objectID": "qmd/survey.html#merge-data-table-list",
    "href": "qmd/survey.html#merge-data-table-list",
    "title": "2  Survey",
    "section": "2.9 Merge data table list",
    "text": "2.9 Merge data table list\n\n\nCode\ndf_plot &lt;- list(\n    \"What is your main target?\"                                = p1,\n    \"Which techniques do you use?\"                             = p2,\n    \"Which analysis do you use or would like to do?\"           = p3,\n    \"If you never or rarely use Galaxy, what are the reasons?\" = p4,\n    \"Survey answer by continent\"                               = p5,\n    \"If the tools, platforms or databases from the previous question could be deployed in Galaxy would use prefer to use in there?\" = p6\n    \n) |&gt;\n    lapply(function(x) {\n        \n        colnames(x) &lt;- c(\"ylabel\", \"N\", \"Prop\")\n        \n        x &lt;- x[order(-N)]\n        \n        x$label &lt;- x$Prop |&gt; round(digits = 4) |&gt; scales::percent()\n        \n        return(x)\n    }) |&gt;\n    rbindlist(idcol = \"question\")",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Survey</span>"
    ]
  },
  {
    "objectID": "qmd/survey.html#output-figure",
    "href": "qmd/survey.html#output-figure",
    "title": "2  Survey",
    "section": "2.10 Output Figure",
    "text": "2.10 Output Figure\n\n2.10.1 Load plotting libraries\n\n\nCode\nlibrary(ggplot2)\nlibrary(ggh4x)\n\nlibrary(shadowtext)\n\nlibrary(tidytext)\nlibrary(paletteer)\nlibrary(extrafont)\n\n\n\n\n2.10.2 Plot\n\n\nCode\ndf_plot$question2 &lt;- df_plot$question |&gt; str_wrap(width = 30)\n\ndf_plot$question2 &lt;- df_plot$question2 |&gt; factor(levels = df_plot$question2 |&gt; unique())\n\ngr &lt;- df_plot |&gt;\n    ggplot(aes(x = N, y = reorder_within(ylabel, N, question2))) +\n    \n    geom_point(size = 4.65, aes(fill = Prop), shape = 21, stroke = .25, color = \"grey25\") +\n    geom_col(width = .75, aes(fill = Prop), lineend = \"round\", color = \"grey25\", linewidth = .15) +\n    geom_point(size = 4.31, aes(fill = Prop, color = Prop), shape = 21, stroke = .25) +\n    \n    \n    geom_shadowtext(aes(label = label), size = 3, hjust = 0, vjust = .5, position = position_nudge(x = 4.5),\n                    bg.r = .05, bg.color = \"white\", color = \"black\") +\n\n    scale_y_reordered() +\n    scale_x_continuous(expand = c(0, 0), \n                       limits = c(0, 123), \n                       breaks = c(10, 25, 50, 75, 100), \n                       minor_breaks = c(17.5, 37.5, 62.5, 87.5, 112.5)) +\n    \n    facet_grid2(vars(question2), scales = \"free_y\", space = \"free_y\") +\n    \n    scale_fill_stepsn(colors = paletteer_c(\"ggthemes::Red-Blue Diverging\", 5, direction = -1),\n                      breaks = c(.2, .4, .6, .8),\n                      limits = c(0, 1),\n                      labels = scales::percent,\n                      guide = guide_colorsteps(barwidth = unit(12, \"lines\"), \n                                               barheight = unit(.5, \"lines\"))) +\n    \n    scale_color_stepsn(colors = paletteer_c(\"ggthemes::Red-Blue Diverging\", 5, direction = -1),\n                       breaks = c(.2, .4, .6, .8),\n                       limits = c(0, 1),\n                       guide = \"none\") +\n    \n    # scale_fill_gradient(low = \"#4E79A7\" |&gt; lighten(.25), high = \"#E15759\" |&gt; darken(.3)) +\n    # scale_color_gradient(low = \"#4E79A7\" |&gt; lighten(.25), high = \"#E15759\" |&gt; darken(.3)) +\n    \n    theme_minimal() +\n    theme(\n        # legend.position.inside = TRUE,\n        legend.position = \"bottom\",\n        legend.title.position = \"top\",\n        legend.title = element_text(family = \"Calibri\"),\n        \n        strip.clip = \"off\",\n        strip.text.y.right = element_text(face = \"bold\", angle=0, vjust=.5, hjust = 0),\n        strip.background = element_blank(),\n        \n        axis.title.y = element_blank(),\n        axis.title.x = element_text(margin = margin(t = 5)),\n        \n        panel.grid.major.y = element_blank(),\n        \n        panel.grid.minor.x = element_line(color = \"grey85\", linetype = \"dotted\", lineend = \"round\"),\n        panel.grid.major.x = element_line(color = \"grey85\"),\n        \n        panel.background = element_rect(fill = NA, color = \"grey85\"),\n        \n        axis.line = element_line(lineend = \"round\"),\n        axis.ticks = element_line(lineend = \"round\"),\n        \n        plot.margin = margin(20, 20, 20, 20),\n        plot.background = element_rect(fill = \"transparent\", color = NA)\n    ) +\n    \n    labs(x = \"Number of Responses\", fill = \"Proportion\")\n\ngr",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Survey</span>"
    ]
  }
]